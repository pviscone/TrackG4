<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TrackG4: trackfit.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TrackG4
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">trackfit.cc File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;../include/EventData.hh&quot;</code><br />
<code>#include &quot;../include/UserParameters.hh&quot;</code><br />
<code>#include &lt;TAxis.h&gt;</code><br />
<code>#include &lt;TCanvas.h&gt;</code><br />
<code>#include &lt;TF1.h&gt;</code><br />
<code>#include &lt;TFile.h&gt;</code><br />
<code>#include &lt;TGraphErrors.h&gt;</code><br />
<code>#include &lt;TNtuple.h&gt;</code><br />
<code>#include &lt;TSystem.h&gt;</code><br />
<code>#include &lt;TTree.h&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;numeric&gt;</code><br />
</div>
<p><a href="trackfit_8cc_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_fit_data.html">FitData</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct that contains the results of the fit of the track.  <a href="struct_fit_data.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aae77cba92a66ef93403f66fb5100a762"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_fit_data.html">FitData</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trackfit_8cc.html#aae77cba92a66ef93403f66fb5100a762">Fit</a> (<a class="el" href="class_event.html">Event</a> *event, TF1 *line, std::string imgpath=&quot;&quot;, int i=0)</td></tr>
<tr class="memdesc:aae77cba92a66ef93403f66fb5100a762"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that, given a event data object, returns the fitdata struct containing the results of the fit.  <a href="trackfit_8cc.html#aae77cba92a66ef93403f66fb5100a762">More...</a><br /></td></tr>
<tr class="separator:aae77cba92a66ef93403f66fb5100a762"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trackfit_8cc.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr class="memdesc:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the fit results in a root file.  <a href="trackfit_8cc.html#ae66f6b31b5ad750f1fe042a706a4e3d4">More...</a><br /></td></tr>
<tr class="separator:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aae77cba92a66ef93403f66fb5100a762" name="aae77cba92a66ef93403f66fb5100a762"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae77cba92a66ef93403f66fb5100a762">&#9670;&nbsp;</a></span>Fit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_fit_data.html">FitData</a> Fit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_event.html">Event</a> *&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TF1 *&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>imgpath</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function that, given a event data object, returns the fitdata struct containing the results of the fit. </p>
<p >This is a simple toy model for tracking in which are performed two different fits in the ZX and ZY planes. The frame of coordinate is the frame of the world of the simulation.</p>
<p >The initial parameters for the fit are estimated computing the parameter of the line considering the first and the last point on the z axis</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event</td><td><a class="el" href="class_event.html" title="Class to store the data of the simulation.">Event</a> class object containing the hits to be fitted </td></tr>
    <tr><td class="paramname">imgpath</td><td>Folder where the output images will be saved </td></tr>
    <tr><td class="paramname">i</td><td>index of the event</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="struct_fit_data.html" title="Struct that contains the results of the fit of the track.">FitData</a> The struct containing the result of the fit </dd></dl>

<p class="definition">Definition at line <a class="el" href="trackfit_8cc_source.html#l00056">56</a> of file <a class="el" href="trackfit_8cc_source.html">trackfit.cc</a>.</p>

<p class="reference">References <a class="el" href="trackfit_8cc_source.html#l00033">FitData::chi2zx</a>, <a class="el" href="trackfit_8cc_source.html#l00034">FitData::chi2zy</a>, <a class="el" href="_event_data_8hh_source.html#l00063">Event::detectorData</a>, <a class="el" href="_user_parameters_8hh_source.html#l00065">GeometryParameters::moduleDimZ</a>, <a class="el" href="trackfit_8cc_source.html#l00029">FitData::mx</a>, <a class="el" href="trackfit_8cc_source.html#l00030">FitData::mx_err</a>, <a class="el" href="trackfit_8cc_source.html#l00031">FitData::my</a>, <a class="el" href="trackfit_8cc_source.html#l00032">FitData::my_err</a>, <a class="el" href="trackfit_8cc_source.html#l00035">FitData::nHit</a>, <a class="el" href="_user_parameters_8hh_source.html#l00050">ReadOutParameters::pixelDimX</a>, <a class="el" href="_user_parameters_8hh_source.html#l00052">ReadOutParameters::pixelDimY</a>, <a class="el" href="trackfit_8cc_source.html#l00036">FitData::status</a>, <a class="el" href="_user_parameters_8hh_source.html#l00046">ReadOutParameters::stripDimX</a>, <a class="el" href="_user_parameters_8hh_source.html#l00048">ReadOutParameters::stripDimY</a>, <a class="el" href="trackfit_8cc_source.html#l00025">FitData::x0</a>, <a class="el" href="trackfit_8cc_source.html#l00026">FitData::x0_err</a>, <a class="el" href="trackfit_8cc_source.html#l00027">FitData::y0</a>, and <a class="el" href="trackfit_8cc_source.html#l00028">FitData::y0_err</a>.</p>

<p class="reference">Referenced by <a class="el" href="trackfit_8cc_source.html#l00157">main()</a>.</p>

</div>
</div>
<a id="ae66f6b31b5ad750f1fe042a706a4e3d4" name="ae66f6b31b5ad750f1fe042a706a4e3d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae66f6b31b5ad750f1fe042a706a4e3d4">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save the fit results in a root file. </p>
<p >The steps performed are:</p><ol type="1">
<li>Load the root file and the branch containing the hits</li>
<li>Create a new root file and a new NTuple</li>
<li>Loop over the event and skip the events without hits</li>
<li>Perform the fit</li>
<li>Discard the results if are meaningless (x0,y0 outside the world box)</li>
<li>Fill the NTuple with the fit results, save and close the file</li>
</ol>
<p >All the distance units are in mm </p>

<p class="definition">Definition at line <a class="el" href="trackfit_8cc_source.html#l00157">157</a> of file <a class="el" href="trackfit_8cc_source.html">trackfit.cc</a>.</p>

<p class="reference">References <a class="el" href="trackfit_8cc_source.html#l00033">FitData::chi2zx</a>, <a class="el" href="trackfit_8cc_source.html#l00034">FitData::chi2zy</a>, <a class="el" href="trackfit_8cc_source.html#l00056">Fit()</a>, <a class="el" href="trackfit_8cc_source.html#l00029">FitData::mx</a>, <a class="el" href="trackfit_8cc_source.html#l00030">FitData::mx_err</a>, <a class="el" href="trackfit_8cc_source.html#l00031">FitData::my</a>, <a class="el" href="trackfit_8cc_source.html#l00032">FitData::my_err</a>, <a class="el" href="trackfit_8cc_source.html#l00035">FitData::nHit</a>, <a class="el" href="trackfit_8cc_source.html#l00036">FitData::status</a>, <a class="el" href="_user_parameters_8hh_source.html#l00077">GeometryParameters::worldSize</a>, <a class="el" href="trackfit_8cc_source.html#l00025">FitData::x0</a>, <a class="el" href="trackfit_8cc_source.html#l00026">FitData::x0_err</a>, <a class="el" href="trackfit_8cc_source.html#l00027">FitData::y0</a>, and <a class="el" href="trackfit_8cc_source.html#l00028">FitData::y0_err</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
